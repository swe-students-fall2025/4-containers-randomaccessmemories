<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notely – Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>
  <div class="app-shell">

    <header class="app-header">
      <h1 class="app-title">Audio Notes</h1>
      <p class="app-subtitle">Recent recordings and their notes.</p>

      <nav class="top-nav">
        <a href="{{ url_for('dashboard') }}" class="nav-current">Dashboard</a>
        <a href="{{ url_for('upload') }}">Upload / Record</a>
      </nav>
    </header>

    <main>
      <section class="panel">
        <h2>Recordings</h2>

        {% if recordings|length == 0 %}
        <p class="detail-text mt-8">
          No recordings yet. Once your team adds recordings, they will appear here.
        </p>
        {% else %}

        <div class="dashboard-header mt-8">
          <p>Showing {{ recordings|length }} recording(s).</p>
        </div>

        <table class="records-table">
          <thead>
            <tr>
              <th>Recorded</th>
              <th>Status</th>
              <th>Summary</th>
              <th>Keywords</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for rec in recordings %}
            <tr>
              <td>
                {% if rec.created_at %}
                {{ rec.created_at.strftime("%Y-%m-%d %H:%M") }}
                {% else %}
                N/A
                {% endif %}
              </td>

              <td>
                {% if rec.status == "done" %}
                <span class="status-chip status-done">Done</span>
                {% elif rec.status == "processing" %}
                <span class="status-chip status-processing">Processing</span>
                {% elif rec.status == "error" %}
                <span class="status-chip status-error">Error</span>
                {% else %}
                <span class="status-chip status-pending">Pending</span>
                {% endif %}
              </td>

              <td>
                {% if rec.summary %}
                {{ rec.summary }}
                {% else %}
                —
                {% endif %}
              </td>

              <td>
                {% if rec.keywords %}
                {{ rec.keywords | join(", ") }}
                {% else %}
                —
                {% endif %}
              </td>

              <td class="text-right">
                <a class="btn btn-secondary" href="{{ url_for('recording_detail', recording_id=rec['_id']) }}">
                  View details
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% endif %}
      </section>
    </main>

  </div>
</body>

</html>